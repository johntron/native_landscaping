<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Backyard Visualization</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- The main stylesheet defines the page layout and backgrounds for each view. -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>Backyard Visualization</h1>
      <div class="controls-row">
        <div class="controls">
          <label for="monthSelect">Select month:</label>
          <select id="monthSelect"></select>
          <label for="scaleInput">Scale (px/in):</label>
          <input id="scaleInput" type="number" inputmode="decimal" step="0.01" min="0.01" />
          <input id="scaleSlider" type="range" step="0.01" min="0.01" aria-label="Scale slider" />
          <label class="lock-toggle" for="lockToggle">
            <input id="lockToggle" type="checkbox" checked />
            <span class="lock-toggle__label">
              <span class="lock-toggle__status" id="lockStatusText">Positions locked</span>
              <span class="lock-toggle__hint">(unlock to drag plants)</span>
            </span>
          </label>
          <button id="exportLayoutBtn" class="button" type="button" disabled>Export layout CSV</button>
        </div>
        <div class="scale-indicator" id="scaleIndicator">
          <div class="scale-indicator__title">Scale reference</div>
          <div class="scale-indicator__bars">
            <div class="scale-indicator__item" data-inches="3">
              <div class="scale-indicator__line"></div>
              <span>3 in</span>
            </div>
            <div class="scale-indicator__item" data-feet="1">
              <div class="scale-indicator__line"></div>
              <span>1 ft</span>
            </div>
            <div class="scale-indicator__item" data-feet="10">
              <div class="scale-indicator__line"></div>
              <span>10 ft</span>
            </div>
          </div>
        </div>
      </div>
      <p class="data-note">
        Plant data is fetched from plants.csv (species) and planting_layout.csv (yard layout). Run these files through a local web server to avoid
        browser restrictions when testing (for example, <code>npx serve</code>).
      </p>
    </header>
    <!-- The views container holds the topâ€‘down, front and side perspectives. -->
    <main class="views">
      <div class="view-panel">
        <div class="view" id="topView">
          <!-- The SVG overlay uses a fixed viewBox measured in yard units; configured at runtime from constants. -->
          <svg id="topSvg" xmlns="http://www.w3.org/2000/svg"></svg>
        </div>
        <p class="view-label">Top-down plan</p>
      </div>
      <div class="view-panel">
        <div class="view" id="frontView">
          <svg id="frontSvg" xmlns="http://www.w3.org/2000/svg"></svg>
        </div>
        <p class="view-label">South elevation</p>
      </div>
      <div class="view-panel">
        <div class="view" id="sideView">
          <svg id="sideSvg" xmlns="http://www.w3.org/2000/svg"></svg>
        </div>
        <p class="view-label">West elevation</p>
      </div>
    </main>
    <!-- The application logic lives in the ES module entry point. -->
    <script type="module" src="src/app.js"></script>
  </body>
</html>
